# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).


## [Unreleased]
### Changed
- (Internal) Refactored the code to use ES modules instead of an ugly mix of
  CommonJS and browser globals.

### Removed
- This add-on no longer supports Mozilla Firefox. This is because Firefox
  [does not support](https://bugzilla.mozilla.org/show_bug.cgi?id=1536094)
  dynamic `import()` in content scripts yet. Sorry folks.

### Fixed
- Fixed a bug that made the context menu unavailable in Google Chrome.

## [0.11.0] - 2020-01-07
### Changed
- Updated data with Heroes of the Storm v2.49.1 patch information. Note that
  this version contains several unofficial fixes for Korean tooltips.
- Hero stats and skill/talent descriptions now display level 0 values instead of
  level 1. (See pull request #57)
- Highlighted text in tooltips now have colored shadows.
- (Server) No longer merges data generated by
  [heroes-parser](https://github.com/joeistas/heroes-parser), which seems to be
  no longer maintained.


## [0.10.4] - 2019-09-22

### Changed
- Use HTTPS for all image URLs.
- HotsDialog has been refactored. It now uses [Preact](https://preactjs.com/)
  with [htm](https://github.com/developit/htm) instead of Mustache templates. It
  has also been split into individual components for better organization.

### Fixed
- The "Open Ruliweb Hots" context menu now appears properly in Chrome.


## [0.10.3] - 2019-08-16

### Fixed
- Fixed a bug that prevented opening a dialog after closing it once.


## [0.10.2] - 2019-08-15
### Changed
- Updated data with Heroes of the Storm v2.47.1 patch information.
- (Server) In-browser tests no longer depend on [axios](https://github.com/axios/axios).
  They now require an HTTP server bound to localhost.

### Fixed
- Fixed a bug that prevented inserting skill/talent boxes since HotS 2.47.0.


## [0.10.1] - 2019-04-18
### Changed
- Updated data with Heroes of the Storm v2.44.1 patch information.
- Removed old hero role icons from the filter.
- Use new role names in the dialog and the Hero Tables.


## [0.10.0] - 2019-03-19
### Changed
- Updated data with Heroes of the Storm v2.43.2 + PTR v2.44.0 patch information.
- Added high-quality icons for the new hero roles.
- Added Korean terms for the new hero roles.


## [0.9.1] - 2018-11-16
### Fixed
- Fixed a bug that caused injected `<detailed>` tables to be placed in wonky
  positions when multiple tables were injected in succession.


## [0.9.0] - 2018-11-14
### Added
- Experimental support for new roles. Icons will be fixed in a future update.

### Changed
- Updated data with Heroes of the Storm v2.40.0.70200 patch information.


## [0.8.2] - 2018-10-27
### Added
- Experimental support for aligning injected tables: In the WYSIWYG editor,
  replace `<p>`s containing injected tables (`<detailed>`) with `<div>`s.

### Changed
- Updated data with Heroes of the Storm v2.39.0 patch information.

### Fixed
- Newline characters (LF) in Skill short descriptions are properly rendered in
  dialog tooltips.


## [0.8.1] - 2018-10-10
### Changed
- Updated data with Heroes of the Storm v2.38.2 + PTR v2.39.0 patch information.
- `docs/hots.json` is directly added to the ZIP file during the build process,
  instead of maintaining a copy at `chrome-ext/src/data/hots.json`.
- `api-server/` renamed to `api/`

### Fixed
- Talent upgrade arrow images are no longer shrunk to weird dimensions in
  Ruliweb boards (on PC).
- Skill/talent tables do not have white edges inside borders in Google Chrome.
  (Issue #37)


## [0.8.0] - 2018-09-05
### Added
- Preliminary support for Mozilla Firefox (version >= 52.0).
- Added option to choose the size of hero, skill, and talent table icons.

### Changed
- Updated data with Heroes of the Storm v2.37.0 patch information.
- Hero, skill, and talent icons have fixed-size padding (4px).
- Skill/talent table headers no longer (unnecessarily) wrap on small viewports.
- Reduced HotS data update interval from 6 to 3 hours.
- (Server) Heroes of the Storm data is no longer parsed from NamuWiki, but is
  extracted directly from the game data files.
- (Server) Renamed npm script `create-hard-links` to `link-dep`


## [0.7.0] - 2018-08-13
### Added
- Added option to create "simple" hero tables, which use fewer HTML characters.
  Simple Hero Tables provide short skill descriptions and do not contain hero
  stat information.
- Support for PTR patch information (new heroes and changes to existing heroes).
- (Server) Added [`HotsData` class](api-server/src/hots-data.js) for quickly
  loading and saving `hots.json`.
- (Server) Added short descriptions to all skills and talents.
- (Server) Added script for extracting short tooltips from JSON generated by
  [HeroesDataParser](https://github.com/koliva8245/HeroesDataParser)

### Changed
- Updated data with Heroes of the Storm v2.36.0 patch information.
- Skill and talent tables have been redesigned to follow the "native" look of
  the hero table redesigned in v0.6.0.
- Use only Korean names for skills and talents.
- Skill and talent tables show hero name and talent level.
- Basic Abilities unlocked through talents are no longer visible in the heroes'
  skills panel.
- Hero Tables: Show hero type and role in place of hero title.
- Show short descriptions in tooltips for skills and talents in the Create
  Skill/Talent Table section of the Select Hero/Skill/Talent Dialog.
- Template files for skill tables, skill-in-hero tables, and talent tables have
  been unified into a single file.
- (Server) Each model class (`Hero`, `Skill`, `Talent`) has been moved to its
  own file.
- (Server) Talents that augment other abilities now have the `upgradeFor`
  property in `hots.json`.

### Fixed
- The Lost Vikings: Added missing skills (1, 2, 3) for selecting each Viking.
- Fixed typos, errors, and outdated information in skill & talent descriptions
  and icons.
- Fixed potential bug that could cause talent groups to be ordered improperly.


## [0.6.1] - 2018-08-03
### Fixed
- Fixed a bug that caused hero tables to break in Firefox and Edge.


## [0.6.0] - 2018-08-03
### Added
- Use [`ajv`](https://github.com/epoberezkin/ajv) to validate `hots.json` with a
  [JSON schema](https://json-schema.org/). The schema is available in
  [`docs/hots-schema.json`](docs/hots-schema.json).
- (Server) Added import script for hero data generated by
  [`heroes-parser`](https://github.com/joeistas/heroes-parser) (run with
  `--profile detailed` option)

### Changed
- Updated data with Heroes of the Storm v2.35.1 patch information.
- Hero tables have been redesigned. They are prettier, and now contain
  expandable/collapsible skill icons, and stat tables.
- Changed skill/talent cooldown icon to a more shiny one.
- Tooltips in the Select Hero/Skill/Talent dialog have been kicked up a notch
  with [`microtip`](https://github.com/ghosh/microtip/).
- Templates are properly minified with [`html-minifier`](https://github.com/kangax/html-minifier).
- The Chrome extension now parses and decorates HotS data upon download. This
  makes the Select Hero/Skill/Talent dialog run slightly faster, at the cost of
  a small bump in the amount of local storage used (~200KB).
- Project layout change: Node.js scripts in `utils/` have been moved to
  `scripts/` and `api-server/`, to better distinguish their purpose.
- Multiple copies of `hots.json` and JS/CSS dependencies are now handled using
  hard links. Hard links can be installed using `npm run create-hard-links`
  (automatically called by `npm install`).

### Fixed
- Rectangular skill/talent icons are properly enlarged and clipped, both in the
   Select Hero/Skill/Talent dialog and in the inserted tables.


## [0.5.0] - 2018-07-13
### Added
- Added 'insert hero table' feature, generating a table of the hero's basic
  skills.
- Skill, talent, and hero tables can be expanded and collapsed with a click.
  Does not work in Internet Explorer and Edge (yet), which will always display
  an expanded table. See https://caniuse.com/#feat=details
- Inserted HTML tables can be quickly deleted in the editor with Ctrl + click.
- Added buttons that insert an entire row of talents (AKA talent groups).

### Changed
- Updated data with Heroes of the Storm v2.35.0 patch information.
- Inserted HTML table width has been slightly reduced.
- Inserted HTML tables are now `inline-block`, and can be mixed with text.
- Use CSS `background-image` instead of `<img>` to show icons. This is necessary
  to prevent launching a popup (enforced by Ruliweb) when clicking on an icon to
  expand/collapse a table.
- Added application version info at bottom of table.
- All inserted HTML now contain a Ruliweb-HotS version signature for debugging.
- Always run tests before building.
- Always generate a build after bumping version.
- Use [juice](https://github.com/Automattic/juice) to generate inline CSS i
  templates.
- Hero basic stats are added in `docs/hots.json`, but not usable in the
  extension yet.

### Fixed
- (none)


## [0.4.0] - 2018-07-09
### Added
- Ruliweb-HotS extension can now be used in Ruliweb MYPI pages.
- You can now choose (not) to insert the current HotS version string, by
  checking the option at the top of the dialog.
- Inserted skill/talent tables now have stats (mana cost, cooldown, ...)
- Quests are properly hightlighted, with a distinct icon.
- Fancy animations when clicking on any icon in the dialog.

### Changed
- Use new icon set, provided by a kind passer-by.
- Instead of `<table>`, use responsive tables that look good on small screens.
- Use antialiased sans-serif font instead of 돋움.
- HotS version string is placed inside the skill/talent description cell.
- Inserted tables are padded with line breaks to make editing easier.
- (Server) `npm` scripts use (Git) bash instead of Windows cmd.

### Fixed
- Inserted table icons retain their width and height in Ruliweb mobile.
- Skill and talent descriptions have proper number of newlines.
- Hero icons in the HotS dialog are properly ordered by name.
- Added mana costs for skills that use "X mana per second".
- Added some missing skills (traits and Z-skills).
- Fixed some skill descriptions.
- Varian is properly highlighted when selecting either 'Warrior' or 'Assassin'.


## [0.3.1]
### Added
- Remove dependency on jQuery, use axios instead

### Fixed
- Fix typo in extension name

## [0.3.0]
### Added
- Added hero filters

### Changed
- Use tingle.js instead of jQuery UI
- Rewrote NamuWiki crawling script

### Fixed
- Retrieve HotS patch versions properly

## [0.2.0]
### Added
- Retrieve fresh data every 6 hours

### Fixed
- Fix Cho'Gall data


[Unreleased]: https://github.com/pastelmind/ruliweb-hots/compare/v0.11.0...HEAD
[0.11.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.10.4...v0.11.0
[0.10.4]: https://github.com/pastelmind/ruliweb-hots/compare/v0.10.3...v0.10.4
[0.10.3]: https://github.com/pastelmind/ruliweb-hots/compare/v0.10.2...v0.10.3
[0.10.2]: https://github.com/pastelmind/ruliweb-hots/compare/v0.10.1...v0.10.2
[0.10.1]: https://github.com/pastelmind/ruliweb-hots/compare/v0.10.0...v0.10.1
[0.10.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.9.1...v0.10.0
[0.9.1]: https://github.com/pastelmind/ruliweb-hots/compare/v0.9.0...v0.9.1
[0.9.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.8.2...v0.9.0
[0.8.2]: https://github.com/pastelmind/ruliweb-hots/compare/v0.8.1...v0.8.2
[0.8.1]: https://github.com/pastelmind/ruliweb-hots/compare/v0.8.0...v0.8.1
[0.8.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.7.0...v0.8.0
[0.7.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.6.1...v0.7.0
[0.6.1]: https://github.com/pastelmind/ruliweb-hots/compare/v0.6.0...v0.6.1
[0.6.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.5.0...v0.6.0
[0.5.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.4.0...v0.5.0
[0.4.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.3.1...v0.4.0
[0.3.1]: https://github.com/pastelmind/ruliweb-hots/compare/v0.3.0...v0.3.1
[0.3.0]: https://github.com/pastelmind/ruliweb-hots/compare/v0.0.1...v0.3.0
[0.2.0]: https://github.com/pastelmind/ruliweb-hots/releases/tag/v0.2.0
